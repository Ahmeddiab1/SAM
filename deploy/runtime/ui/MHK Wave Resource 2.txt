MHK Wave Resource 2
753
698
17
GroupBox

1
8
Name
5
9
GroupBox2
X
3
6
Y
3
9
Width
3
744
Height
3
525
Tool Tip
5
0
Caption
5
50
Choose a representative typical wave resource file
Bold
2
1
Button

1
8
Name
5
14
btnScanLibrary
X
3
549
Y
3
336
Width
3
150
Height
3
24
Tool Tip
5
0
Caption
5
15
Refresh Library
TabOrder
3
4294967295
GroupBox

1
8
Name
5
10
object 418
X
3
6
Y
3
594
Width
3
744
Height
3
96
Tool Tip
5
0
Caption
5
48
Use a wave resource file stored on your computer
Bold
2
1
Label

1
13
Name
5
8
object 7
X
3
18
Y
3
648
Width
3
588
Height
3
39
Tool Tip
5
0
Caption
5
127
Check the box and click Browse to choose a an .csv file stored on your computer without adding it to the wave resource library.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
13
Name
5
9
object 73
X
3
15
Y
3
30
Width
3
804
Height
3
24
Tool Tip
5
0
Caption
5
128
Click a name in the list to choose a file from the library. Type a few letters of the name in the search box to filter the list.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Button

1
8
Name
5
14
select_wf_wind
X
3
648
Y
3
618
Width
3
90
Height
3
24
Tool Tip
5
0
Caption
5
9
Browse...
TabOrder
3
4294967295
CheckBox

1
9
Name
5
20
use_specific_wf_wave
X
3
18
Y
3
618
Width
3
30
Height
3
27
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
4294967295
TextEntry

1
11
Name
5
22
user_specified_wf_wave
X
3
57
Y
3
618
Width
3
585
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
18
wave_resource.city
X
3
102
Y
3
363
Width
3
142
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
TextEntry

1
11
Name
5
21
wave_resource.country
X
3
102
Y
3
417
Width
3
90
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
25
wave_resource.description
X
3
102
Y
3
336
Width
3
425
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
Numeric

1
17
Name
5
18
wave_resource.elev
X
3
384
Y
3
417
Width
3
142
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
2
 m
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
18
wave_resource.file
X
3
243
Y
3
498
Width
3
499
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
128
0
64
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
wave_resource.lat
X
3
384
Y
3
363
Width
3
142
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
3
 °N
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Library

1
8
Name
5
22
wave_resource.location
X
3
15
Y
3
54
Width
3
726
Height
3
276
Tool Tip
5
0
Library
5
16
WaveResourceData
Fields
5
3
Sou
Numeric

1
17
Name
5
17
wave_resource.lon
X
3
384
Y
3
390
Width
3
142
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
3
 °E
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
19
wave_resource.state
X
3
102
Y
3
390
Width
3
142
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0

23
use_specific_wf_wave
3
1
Wind resource enable user-specified file
 
MHK Wave Resource
0
5
1
1
1
1
0
CheckBox
user_specified_wf_wave
3
4
Wind resource user-specified file
 
MHK Wave Resource
0
1
1
4
1
 
Default
wave_climate.avg_wave_speed_closest_to_hub_ht
3
1
Average wind speed nearest hub height
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_climate.msg
3
4
 
 
MHK Wave Resource
0
0
1
4
0
Default
wave_climate.msg_is_error
3
1
 
 
MHK Wave Resource
20
=\wind_resource_info
0
1
1
1
1
0
Default
wave_climate.url_info
3
4
Data source
 
MHK Wave Resource
0
0
1
4
5
empty
Default
wave_resource.city
3
4
City
 
MHK Wave Resource
0
8
1
4
0
TextEntry
wave_resource.closest_dir_meas_ht
3
1
Height of direction data closest to hub height
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.closest_speed_meas_ht
3
1
Height of speed data closest to hub height
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.country
3
4
Country
 
MHK Wave Resource
0
8
1
4
0
TextEntry
wave_resource.description
3
4
Description
 
MHK Wave Resource
0
8
1
4
0
TextEntry
wave_resource.elev
3
1
Elevation above sea level
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.file
3
4
Wave resource file name from library
 
MHK Wave Resource
0
8
1
4
0
TextEntry
wave_resource.lat
3
1
Latitude
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.lat_requested
3
1
 
deg
MHK Wave Resource
0
0
1
1
1
1
0
Default
wave_resource.location
3
4
Wave Resource
 
MHK Wave Resource
18
WaveResourceData|0
19
1
4
16
WY Cheyenne_2006
Library
wave_resource.location_id
3
4
 
 
MHK Wave Resource
0
8
1
4
0
Default
wave_resource.lon
3
1
Longitude
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.lon_requested
3
1
Longitude
deg
MHK Wave Resource
0
0
1
1
1
1
0
Default
wave_resource.requested_ht
3
1
Turbine hub height
 
MHK Wave Resource
0
8
1
1
1
1
0
Numeric
wave_resource.state
3
4
State
 
MHK Wave Resource
0
8
1
4
0
TextEntry
wave_resource.year
3
1
 
 
MHK Wave Resource
0
8
1
1
1
1
0
Default
wave_resource_filename
3
4
Wind resource file for simulation
 
MHK Wave Resource
0
9
1
4
0
Default

790
equations{'wave_resource_filename'} = define() {
	if ( ${use_specific_wf_wave} ) return ${user_specified_wf_wave};
	else return ${wave_resource.file};
};

equations{ '$MIMO$ mhk_wave_resource_freq' } = define () {
	mat = ${wave_resource_definition};
	
	max_Hs = 0;
	max_Te = 0;
	max_freq = 0;
	for (r=1;r<#mat; r++)
		for (c=1; c<#mat[0];c++)
			if (mat[r][c] > max_freq)
			{
				max_freq =mat[r][c];
				max_Hs = mat[r][0];
				max_Te = mat[0][c];
			}
	${mhk_wave_max_frequency} = max_freq;
	${mhk_wave_max_frequency_Hs} = max_Hs;
	${mhk_wave_max_frequency_Te} = max_Te;
	
	return 0;
};


equations{ 'mhk_wave_frequency_sum' } = define () 
{
	mat = ${wave_resource_definition};
	sum_mat = 0;
	for (r=1;r<#mat; r++)
		for (c=1; c<#mat[0];c++)
			sum_mat += mat[r][c];
	return sum_mat;
};

869
on_change{'btnScanLibrary'} = define() {
	rescanlibrary('wind');
};

on_load{'Wind Resource File'} = define() {
	on_change{'use_specific_wf_wave'}();
};

on_change{'wave_resource.location'} = define() {
	file = ${wave_resource.file};
	
	if (!file_exists(file))
	{
		rescanlibrary( 'wind' );
		refresh('wave_resource.location');
		return;
	}

	file = replace(file, '\\', '/');
	fn = open(file,'r');

	close(fn);
};

on_change{'use_specific_wf_wave'} = define() {
	enable( 'user_specified_wf_wave', ${use_specific_wf_wave} );
	enable( 'select_wf_wind', ${use_specific_wf_wave} );
};

on_change{'select_wf_wind'} = define() {
	file = choose_file( path_only( value('user_specified_wf_wave') ), 'Choose a wind resource file', 
		'Wind Resource Files (*.srw)|*.srw');
		
	if ( file != '' ) {
		file = replace(file, '\\', '/');
		value( 'user_specified_wf_wave', file );
	}
};